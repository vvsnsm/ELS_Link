{% extends 'layouts.html' %}
{% load static %}

{% block 'mainsection' %}

<body class="newsfeed">
    <div class="container-fluid" id="wrapper">
        <div class="row newsfeed-size">
            <div class="col-md-12 newsfeed-right-side">
                {% include 'navsection.html' %}
                <div class="row newsfeed-right-side-content mt-3">
                    <div class="col-md-3 newsfeed-left-side sticky-top shadow-sm" id="sidebar-wrapper">
                        <div class="card newsfeed-user-card h-100">
                            <ul class="list-group list-group-flush newsfeed-left-sidebar">
                                <li class="list-group-item">
                                    <h6>Home</h6>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center sd-active">
                                    <a href="{% url 'index' %}" class="sidebar-item"><img src="{% static 'images/icons/left-sidebar/newsfeed.png' %}" alt="newsfeed"> News Feed</a>
                                    <a href="#" class="newsfeedListicon"><i class='bx bx-dots-horizontal-rounded'></i></a>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    <a href="{% url 'messages' %}" class="sidebar-item"><img src="{% static 'images/icons/left-sidebar/message.png' %}" alt="message"> Messages</a>
                                    <span class="badge badge-primary badge-pill">2</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    <a href="{% url 'groups' %}" class="sidebar-item"><img src="{% static 'images/icons/left-sidebar/group.png' %}" alt="group"> Groups</a>
                                    <span class="badge badge-primary badge-pill">17</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    <a href="{% url 'friends' %}" class="sidebar-item"><img src="{% static 'images/icons/left-sidebar/find-friends.png' %}" alt="find-friends"> Find Friends</a>
                                    <span class="badge badge-primary badge-pill"><i class='bx bx-chevron-right'></i></span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-6 second-section" id="page-content-wrapper">
                        <div class="mb-3">
                            <div class="btn-group d-flex">
                                <a href="{% url 'index' %}" class="btn btn-quick-links mr-3 ql-active custom-color">
                                    <img src="{% static 'images/icons/theme/speech.png' %}" class="mr-2" alt="quick links icon">
                                    <span class="fs-8">Speech</span>
                                </a>
                                <a href="{% url 'messages' %}" class="btn btn-quick-links mr-3">
                                    <img src="{% static 'images/icons/theme/listen.png' %}" class="mr-2" alt="quick links icon">
                                    <span class="fs-8">Listen</span>
                                </a>
                                <a href="#" class="btn btn-quick-links">
                                    <img src="{% static 'images/icons/theme/watch.png' %}" class="mr-2" alt="quick links icon">
                                    <span class="fs-8">Watch</span>
                                </a>
                            </div>
                        </div>
                        <ul class="list-unstyled" style="margin-bottom: 0;">
                            <li class="media post-form w-shadow">
                                <div class="media-body">
                                    <form action="upload" method="POST" enctype="multipart/form-data" >
                                        {% csrf_token %}
                                        <div class="form-group post-input">
                                            <textarea class="form-control" id="postForm" rows="2" name="caption" placeholder="What's on your mind, Arthur?"></textarea>
                                        </div>
                                        <div class="row post-form-group">
                                            <div class="col-md-9">
                                                <button type="button" class="btn btn-link post-form-btn btn-sm">
                                                    <img src="{% static 'images/icons/theme/post-image.png' %}" alt="post form icon"> <span><input type="file" name="image_upload">Photo/Video</span>
                                                </button>
                                            </div>
                                            <div class="col-md-3 text-right">
                                                <button class="button bg-blue-700" type="submit" >Send Post</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </li>
                        </ul>

                        <!-- Posts -->
                        <div class="posts-section mb-5">
                            <!-- ============================================================================= -->
                            
                            <!-- Posts -->
                            <div class="posts-section mb-5">
                                {% for post in posts reversed %}
                                <div class="post border-bottom p-3 bg-white shadow-sm mb-4">
                                    <!-- Post Header -->
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <div class="d-flex align-items-center">
                                            <img src="{% static 'images/users/user-1.jpg' %}" alt="User Image" class="rounded-circle me-2" style="width: 40px; height: 40px;">
                                            <a href="/profile/{{post.user}}" class="text-decoration-none text-dark">{{ post.user }}</a>
                                        </div>
                                        <div class="dropdown">
                                            <a href="#" class="text-muted" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                <i class='bx bx-dots-horizontal-rounded'></i>
                                            </a>
                                            <ul class="dropdown-menu dropdown-menu-end">
                                                <li><a class="dropdown-item" href="#"><i class='bx bx-bookmark-plus'></i> Save post</a></li>
                                                <li><a class="dropdown-item" href="#"><i class='bx bx-hide'></i> Hide post</a></li>
                                                <li><a class="dropdown-item" href="#"><i class='bx bx-time'></i> Snooze {{ post.user }} for 30 days</a></li>
                                                <li><a class="dropdown-item" href="#"><i class='bx bx-block'></i> Report</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                    <span class="d-block text-muted mb-2">3 hours ago <i class='bx bx-globe'></i></span>

                                    <!-- Post Image -->
                                    <div class="mb-2">
                                        <a href="{{ post.image.url }}">
                                            <img src="{{ post.image.url }}" class="img-fluid rounded" alt="Post Image">
                                        </a>
                                    </div>

                                    <!-- Post Details -->
                                    <div>
                                        <div class="d-flex align-items-center mb-2">
                                            <a href="/like-post?post_id={{ post.id }}" class="text-decoration-none me-2">
                                                <i class='bx bxs-like me-1'></i>
                                                {% if post.no_of_likes == 0 %}
                                                <span>No likes</span>
                                                {% elif post.no_of_likes == 1 %}
                                                <span>Liked by {{ post.no_of_likes }} person</span>
                                                {% else %}
                                                <span>Liked by {{ post.no_of_likes }} people</span>
                                                {% endif %}
                                            </a>
                                            <a href="{{ post.image.url }}" download class="btn btn-outline-secondary btn-sm ms-2">
                                                <i class='bx bx-download'></i> Download
                                            </a>
                                        </div>
                                        <p class="mb-0">
                                            <a href="/profile/{{ post.user }}" class="text-decoration-none text-dark"><strong>{{ post.user }}</strong></a> {{ post.caption }}
                                        </p>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>

                            <!-- Suggestions Section -->
                            <div class="suggestions-section">
                                {% for suggestion in suggestions_username_profile_list %}
                                <div class="suggestion-item d-flex align-items-center border-bottom py-2 mb-2">
                                    <a href="/profile/{{ suggestion.user }}" class="me-3">
                                        <img src="{{ suggestion.profileimg.url }}" class="rounded-circle" style="width: 50px; height: 50px;" alt="Profile Image">
                                    </a>
                                    <div>
                                        <a href="/profile/{{ suggestion.user }}" class="text-decoration-none text-dark d-block">{{ suggestion.user }}</a>
                                        <span class="text-muted">{{ suggestion.bio }}</span>
                                    </div>
                                    <a href="/profile/{{ suggestion.user }}" class="btn btn-primary ms-auto">View User</a>
                                </div>
                                {% endfor %}
                            </div>

                            <!-- ============================================================================= -->
                            
                            <div class="d-flex justify-content-center my-5 load-post">
                                <button type="button" class="btn btn-quick-link join-group-btn border shadow" data-toggle="tooltip" data-placement="top" data-title="Load More Post"><i class='bx bx-dots-horizontal-rounded'></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 third-section">
                        <div class="card shadow-sm">
                            <div class="card-body">
                                <div class="weather-card-header d-flex justify-content-between align-items-center">
                                    <p class="fs-1 mb-0">11:37 PM</p>
                                    <a href="#" class="btn text-primary">California, CA <i class='bx bx-chevron-down'></i></a>
                                </div>
                                <div class="weather-quick align-items-center mt-4">
                                    <div class="row">
                                        <div class="col-md-8">
                                            <img src="{% static 'images/icons/weather/sun.png' %}" width="40" height="40" alt="Weather icon">
                                            <h1 class="weather-card display-4 ml-3">28<span class="text-muted">&deg;</span></h1>
                                        </div>
                                        <div class="col-md-4">
                                            <p class="mb-0 fs-1" ><i class='bx bx-droplet'></i> 15%</p>
                                            <p class="mb-0 fs-1" ><i class='bx bx-flag'></i> 10km/h</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" id="postModal" aria-labelledby="postModal" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-body post-body">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-7 post-content">
                                <img src="https://scontent.fevn1-2.fna.fbcdn.net/v/t1.0-9/56161887_588993861570433_2896723195090436096_n.jpg?_nc_cat=103&_nc_eui2=AeFI0UuTq3uUF_TLEbnZwM-qSRtgOu0HE2JPwW6b4hIki73-2OWYhc7L1MPsYl9cYy-w122CCak-Fxj0TE1a-kjsd-KXzh5QsuvxbW_mg9qqtg&_nc_ht=scontent.fevn1-2.fna&oh=ea44bffa38f368f98f0553c5cef8e455&oe=5D050B05" alt="post-image">
                            </div>
                            <div class="col-md-5 pr-3">
                                <div class="media text-muted pr-3 pt-3">
                                    <img src="{% static 'images/users/user-1.jpg' %}" alt="user image" class="mr-3 post-modal-user-img">
                                    <div class="media-body">
                                        <div class="d-flex justify-content-between align-items-center w-100 post-modal-top-user fs-9">
                                            <a href="#" class="text-gray-dark">John Michael</a>
                                            <div class="dropdown">
                                                <a href="#" class="postMoreSettings" role="button" data-toggle="dropdown" id="postOptions" aria-haspopup="true" aria-expanded="false">
                                                    <i class='bx bx-dots-horizontal-rounded'></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left postDropdownMenu">
                                                    <a href="#" class="dropdown-item" aria-describedby="savePost">
                                                        <div class="row">
                                                            <div class="col-md-2">
                                                                <i class='bx bx-bookmark-plus postOptionIcon'></i>
                                                            </div>
                                                            <div class="col-md-10">
                                                                <span class="postOptionTitle">Save post</span>
                                                                <small id="savePost" class="form-text text-muted">Add this to your saved items</small>
                                                            </div>
                                                        </div>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                        <span class="d-block fs-8">3 hours ago <i class='bx bx-globe ml-3'></i></span>
                                    </div>
                                </div>
                                <div class="mt-3 post-modal-caption fs-9">
                                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quis voluptatem veritatis harum, tenetur, quibusdam voluptatum, incidunt saepe minus maiores ea atque sequi illo veniam sint quaerat corporis totam et. Culpa?</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Call modal -->
    <div id="callModal" class="modal fade call-modal" tabindex="-1" role="dialog" aria-labelledby="callModalLabel" aria-hidden="true">
        <div class="modal-dialog call-modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header align-items-center">
                    <div class="call-status">
                        <h1 id="callModalLabel" class="modal-title mr-3">Connected</h1>
                        <span class="online-status bg-success"></span>
                    </div>
                    <div class="modal-options d-flex align-items-center">
                        <button type="button" class="btn btn-quick-link" id="minimize-call-window">
                            <i class='bx bx-minus'></i>
                        </button>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="row h-100">
                        <div class="col-md-12 d-flex align-items-center justify-content-center">
                            <div class="call-user text-center">
                                <div class="call-user-img-anim">
                                    <img src="{% static 'images/users/user-1.jpg' %}" class="call-user-img" alt="Call user image">
                                </div>
                                <p class="call-user-name">Name Surename</p>
                                <p class="text-muted call-time">05:28</p>
                            </div>
                        </div>
                        <div class="col-md-4 offset-md-4 d-flex align-items-center justify-content-between call-btn-list">
                            <a href="#" class="btn call-btn" data-toggle="tooltip" data-placement="top" data-title="Disable microphone"><i class='bx bxs-microphone'></i></a>
                            <a href="#" class="btn call-btn" data-toggle="tooltip" data-placement="top" data-title="Enable camera"><i class='bx bxs-video-off'></i></a>
                            <a href="#" class="btn call-btn drop-call" data-toggle="tooltip" data-placement="top" data-title="End call" data-dismiss="modal" aria-label="Close"><i class='bx bxs-phone'></i></a>
                            <a href="#" class="btn call-btn" data-toggle="tooltip" data-placement="top" data-title="Share Screen"><i class='bx bx-laptop'></i></a>
                            <a href="#" class="btn call-btn" data-toggle="tooltip" data-placement="top" data-title="Dark mode"><i class='bx bx-moon'></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- END call modal -->

    <!-- Core -->
    <script src="{% static 'js/jquery/jquery-3.3.1.min.js' %}"></script>
    <script src="{% static 'js/popper/popper.min.js' %}"></script>
    <script src="{% static 'js/bootstrap/bootstrap.min.js' %}"></script>
    <!-- Optional -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <script type="text/javascript">
        $("#menu-toggle").click(function(e) {
            e.preventDefault();
            $("#wrapper").toggleClass("toggled");
        });

    </script>
    <script src="{% static 'js/app.js' %}"></script>
    <script src="{% static 'js/components/components.js' %}"></script>
</body>


{% endblock %}